<!DOCTYPE html>
<html lang="en">

  <head>
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  Leo  D'Amato


  | How far did I walk with my iPhone?

</title>
<meta name="description" content="Personal website of Leo D'Amato
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="https://damat-le.github.io/blog/2022/apple_health_app/">



  </head>

  <body class="fixed-top-nav sticky-bottom-footer">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="https://damat-le.github.io/">
       <span class="font-weight-bold">Leo</span>   D'Amato
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item active">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/cv/">
                cv
                
              </a>
          </li>
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          
          
          
          
          
          
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      





<div class="post">

  <header class="post-header">
    <h1 class="post-title">How far did I walk with my iPhone?</h1>
    <p class="post-meta">January 7, 2022</p>
    <p class="post-tags">
      <a href="/blog/2022"> <i class="fas fa-calendar fa-sm"></i> 2022 </a>
      
        ·  
        
        <a href="/blog/tag/Health-data,">
          <i class="fas fa-hashtag fa-sm"></i> Health-data,</a>  
          
        <a href="/blog/tag/Python,">
          <i class="fas fa-hashtag fa-sm"></i> Python,</a>  
          
        <a href="/blog/tag/Pandas,">
          <i class="fas fa-hashtag fa-sm"></i> Pandas,</a>  
          
        <a href="/blog/tag/Apple">
          <i class="fas fa-hashtag fa-sm"></i> Apple</a>  
          
      

      
        ·  
        
        <a href="/blog/category/data-stories">
          <i class="fas fa-tag fa-sm"></i> data-stories</a>  
          
      

    </p>
  </header>

  <article class="post-content">
    
    <h4> Table of contents</h4>
    <ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#data-description">Data description</a></li>
<li><a href="#data-preparation">Data preparation</a></li>
<li>
<a href="#exploratory-analysis">Exploratory Analysis</a><ul>
<li><a href="#1-peaks">1. Peaks</a></li>
<li><a href="#2-anomalous-peaks">2. Anomalous peaks</a></li>
<li><a href="#3-change-in-life-style">3. Change in life style</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#notes">Notes</a></li>
</ul>
    
    <h2 id="introduction">Introduction</h2>
<p>One day, I was looking at the settings of the Health app on my iPhone and I found out the possibility of exporting all health data recorded over time.</p>

<!-- <div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <picture>
    
    <source media="(max-width: 480px)" srcset="/assets/resized/guide_to_export-480x318.png">
    
    <source media="(max-width: 800px)" srcset="/assets/resized/guide_to_export-800x530.png">
    
    <img class="img-fluid rounded z-depth-1" src="/assets/img/apple_health_app/guide_to_export.png"   data-zoomable />
</picture>

    </div>
</div>
<br> -->

<p><img src="/assets/img/apple_health_app/guide_to_export.png" width="100%" class="img-fluid rounded z-depth-1"></p>

<p>Immediately, some questions came to my mind:</p>
<ul>
  <li><em>How far did I walk since I have this app?</em></li>
  <li><em>Can I study my habits by analysing such data?</em></li>
  <li><em>What kind of data does the app record?</em></li>
</ul>

<p>I tried to answer to such questions with <strong>Python</strong>.</p>

<h2 id="data-description">Data description</h2>
<p>Health data are provided in a <code class="language-plaintext highlighter-rouge">.xml</code> file. This file contains a list of <em>records</em> with the following structure:</p>

<!-- <div style="height: 300px;overflow: scroll;"> -->

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
<td class="code"><pre> <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 15:25:45 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 14:27:55 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 14:34:13 +0100"</span> <span class="na">value=</span><span class="s">"17"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 15:25:45 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 14:41:17 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 14:47:37 +0100"</span> <span class="na">value=</span><span class="s">"13"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 15:25:45 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 14:47:37 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 14:53:08 +0100"</span> <span class="na">value=</span><span class="s">"27"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 15:25:45 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 14:57:37 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 15:03:45 +0100"</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 15:25:45 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 15:12:11 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 15:22:10 +0100"</span> <span class="na">value=</span><span class="s">"80"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 15:22:10 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 15:29:54 +0100"</span> <span class="na">value=</span><span class="s">"387"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 15:36:52 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 15:42:57 +0100"</span> <span class="na">value=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 15:46:17 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 15:55:12 +0100"</span> <span class="na">value=</span><span class="s">"148"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 15:59:13 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 16:07:33 +0100"</span> <span class="na">value=</span><span class="s">"94"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 16:07:33 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 16:14:43 +0100"</span> <span class="na">value=</span><span class="s">"380"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 16:14:43 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 16:23:30 +0100"</span> <span class="na">value=</span><span class="s">"337"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 16:23:30 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 16:33:28 +0100"</span> <span class="na">value=</span><span class="s">"728"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 16:33:28 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 16:43:22 +0100"</span> <span class="na">value=</span><span class="s">"137"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 16:43:22 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 16:52:16 +0100"</span> <span class="na">value=</span><span class="s">"599"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;Record</span> <span class="na">type=</span><span class="s">"HKQuantityTypeIdentifierStepCount"</span> <span class="na">sourceName=</span><span class="s">"iPhone"</span> <span class="na">sourceVersion=</span><span class="s">"11.4.1"</span> <span class="na">device=</span><span class="s">"&amp;lt;&amp;lt;HKDevice: 0x282374b90&amp;gt;, name:iPhone, manufacturer:Apple, model:iPhone, hardware:iPhone8,1, software:11.4.1&amp;gt;"</span> <span class="na">unit=</span><span class="s">"count"</span> <span class="na">creationDate=</span><span class="s">"2018-08-23 17:34:46 +0100"</span> <span class="na">startDate=</span><span class="s">"2018-08-23 16:52:16 +0100"</span> <span class="na">endDate=</span><span class="s">"2018-08-23 17:00:58 +0100"</span> <span class="na">value=</span><span class="s">"189"</span><span class="nt">/&gt;</span>
</pre></td>
</tr></tbody></table></code></pre></figure>

<p>Each record represents a measurement and each measurement is characterised by the following main features:</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">type</code>: the quantity being measured. Possible values are:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">HKQuantityTypeIdentifierStepCount</code>: a quantity sample type that measures the number of steps the user has taken.</li>
      <li>
<code class="language-plaintext highlighter-rouge">HKQuantityTypeIdentifierDistanceWalkingRunning</code>: a quantity sample type that measures the distance the user has moved by walking or running.</li>
      <li>
<code class="language-plaintext highlighter-rouge">HKQuantityTypeIdentifierFlightsClimbed</code>: a quantity sample type that measures the number flights of stairs that the user has climbed. A flight of stairs is considered to be 3 meters high.</li>
      <li>other values: for details read <a href="https://developer.apple.com/documentation/healthkit/data_types" target="_blank" rel="noopener noreferrer">Apple’s Documentation</a>
</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">value</code>: the result of the measurement.</li>
  <li>
<code class="language-plaintext highlighter-rouge">startDate</code>: the time at which the device started to measure.</li>
  <li>
<code class="language-plaintext highlighter-rouge">endDate</code>: the time at which the device ended to measure.</li>
  <li>If you look carefully at the data, you may note an other feature: <code class="language-plaintext highlighter-rouge">CreationDate</code>. I wasn’t able to find it into the documentation, so I don’t know exactly what it stands for.</li>
</ul>

<h2 id="data-preparation">Data preparation</h2>
<p>By using the pandas method <a href="https://pandas.pydata.org/docs/reference/api/pandas.read_xml.html" target="_blank" rel="noopener noreferrer"><code class="language-plaintext highlighter-rouge">pandas.read_xml()</code></a>, it is possible to read the file as pandas dataframe.</p>

<p>The data are not perfect, hence I have performed some data cleaning.</p>

<p>Data before October 2019 are noisy, in the sense that there are days in which no activity was recorded by my phone and days in which there are only aggregated measures. This is probably due to missing authorizations I should have given to the app to record my activity. For this reason, in what follows, we will use only data from October 2019 on.</p>

<p>Moreover, since I wanted to associate to each sample a specific point in time instead of a time interval (<code class="language-plaintext highlighter-rouge">endDate</code>-<code class="language-plaintext highlighter-rouge">startDate</code>), I have computed a new feature called <code class="language-plaintext highlighter-rouge">middleDate</code> as below and I set it as index of the dataframe:</p>

\[middleDate = startDate + \frac{(endDate-startDate)}{2}\]

<p>I obtained a dataframe like this:</p>

<style>
    table { border-collapse: collapse; border: 3px solid #eee; }
    table tr th:first-child { background-color: #eeeeee; color: #333; font-weight: bold }
    table thead th { background-color: #eee; color: #000; }
    tr, th, td { border: 1px solid #ccc; border-width: 0.5px 0 0 0.5px; border-collapse: collapse;
    padding: 5px; font-family: monospace; font-size: 10px }</style>

<div style="overflow: scroll;">
    <table border="0" class="dataframe">
    <thead>
        <tr class="header" style="text-align: left;">
        <th>middleDate</th>
        <th>type</th>
        <th>sourceName</th>
        <th>sourceVersion</th>
        <th>unit</th>
        <th>creationDate</th>
        <th>startDate</th>
        <th>endDate</th>
        <th>value</th>
        <th>device</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        <td>2019-10-14 11:13:43+01:00</td>
        <td>HKQuantityTypeIdentifierStepCount</td>
        <td>iPhone</td>
        <td>13.1.2</td>
        <td>count</td>
        <td>2019-10-14 11:21:01+01:00</td>
        <td>2019-10-14 11:08:43+01:00</td>
        <td>2019-10-14 11:18:43+01:00</td>
        <td>705.00000</td>
        <td>&lt;&lt;HKDevice: 0x28239e3a0&gt;, name:...&gt;</td>
        </tr>
        <tr>
        <td>2020-07-12 11:24:24.500000+01:00</td>
        <td>HKQuantityTypeIdentifierDistanceWalkingRunning</td>
        <td>iPhone</td>
        <td>13.4.1</td>
        <td>km</td>
        <td>2020-07-12 11:32:40+01:00</td>
        <td>2020-07-12 11:24:22+01:00</td>
        <td>2020-07-12 11:24:27+01:00</td>
        <td>0.00556</td>
        <td>&lt;&lt;HKDevice: 0x28239eb20&gt;, name:...&gt;</td>
        </tr>
        <tr>
        <td>2021-10-04 09:46:40+01:00</td>
        <td>HKQuantityTypeIdentifierWalkingDoubleSupportPercentage</td>
        <td>iPhone</td>
        <td>14.5.1</td>
        <td>%</td>
        <td>2021-10-04 09:50:59+01:00</td>
        <td>2021-10-04 09:46:24+01:00</td>
        <td>2021-10-04 09:46:56+01:00</td>
        <td>0.30000</td>
        <td>&lt;&lt;HKDevice: 0x2823680a0&gt;, name:...&gt;</td>
        </tr>
    </tbody>
    </table>

</div>
<p><br></p>

<h2 id="exploratory-analysis">Exploratory Analysis</h2>
<p>Let’s start by looking at a global plot of the 3 main quantities my iPhone has recorded: <strong>number of steps walked</strong>, <strong>number of kilometres walked</strong> and <strong>number of flights of stairs climbed</strong> (remember: 1 flight of stairs \(\simeq\) 3 meters).</p>

<!-- <div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <picture>
    
    <source media="(max-width: 480px)" srcset="/assets/resized/daily_info-480x288.png">
    
    <source media="(max-width: 800px)" srcset="/assets/resized/daily_info-800x480.png">
    
    <source media="(max-width: 1400px)" srcset="/assets/resized/daily_info-1400x840.png">
    
    <img class="img-fluid rounded z-depth-1" src="/assets/img/apple_health_app/output/daily_info.png"   data-zoomable />
</picture>

    </div>
</div>
<br> -->

<p><img src="/assets/img/apple_health_app/output/daily_info.png" width="100%" class="img-fluid rounded z-depth-1"></p>

<p>From the graphs, without any statistical tool, just by visual inspection, we can observe several things:</p>
<ol>
  <li>There are many peaks, mainly concentrated in the summertime.</li>
  <li>Some of those peaks seem to be anomalous.</li>
  <li>There is a change in life style around March 2020.</li>
</ol>

<h3 id="1-peaks">1. Peaks</h3>
<p>The concentration of peaks in the summertime is easily explainable: usually, in summer, people decide to hike in the mountains, depart for a trip and so on, and this usually translates into intense days from the physical activity perspective.</p>

<p>I belong to that category of people and, in fact, all those “summer peaks” correspond to trips, hikes et similia.</p>

<h3 id="2-anomalous-peaks">2. Anomalous peaks</h3>
<p>If you look carefully, in June 2021, something weired is happening.</p>

<!-- <div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <picture>
    
    <source media="(max-width: 480px)" srcset="/assets/resized/june2021_info-480x288.png">
    
    <source media="(max-width: 800px)" srcset="/assets/resized/june2021_info-800x480.png">
    
    <source media="(max-width: 1400px)" srcset="/assets/resized/june2021_info-1400x840.png">
    
    <img class="img-fluid rounded z-depth-1" src="/assets/img/apple_health_app/output/june2021_info.png"   data-zoomable />
</picture>

    </div>
</div>
<br> -->

<p><img src="/assets/img/apple_health_app/output/june2021_info.png" width="100%" class="img-fluid rounded z-depth-1"></p>

<p>There are sharp peaks in the number of flights of stairs climbed that do not correspond to peaks in steps/distance walked. <em>Did I play with elevators all day long?</em></p>

<p>The answer is: no, I didn’t.</p>

<p>What is going on here is that I went cycling in the mountains. <strong>While you ride on the bike, the Health app doesn’t measure any step walked but it keeps track of the changes in altitude</strong>. This explains why steps/distance walked do not present any peak while the floor count does.</p>

<h3 id="3-change-in-life-style">3. Change in life style</h3>
<p>Around March 2020, a change in life style is observable:</p>

<!-- <div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <picture>
    
    <source media="(max-width: 480px)" srcset="/assets/resized/march2020_info-480x288.png">
    
    <source media="(max-width: 800px)" srcset="/assets/resized/march2020_info-800x480.png">
    
    <source media="(max-width: 1400px)" srcset="/assets/resized/march2020_info-1400x840.png">
    
    <img class="img-fluid rounded z-depth-1" src="/assets/img/apple_health_app/output/march2020_info.png"   data-zoomable />
</picture>

    </div>
</div>
<br> -->
<p><img src="/assets/img/apple_health_app/output/march2020_info.png" width="100%" class="img-fluid rounded z-depth-1"></p>

<p>This change is not evident by looking only at the distance or steps walked but, once again, it is the number of flights of stairs climbed that brings the information.</p>

<p>In 2020, the covid pandemic spread all over the world. In March, European countries started to proclaim national lockdowns and a lot of people were forced to stay at home. In that period, I was living in France for studying but on March 15th I decided to move back to Italy and stay with my family during the lockdown.</p>

<p>This is of course the reason behind the change in my physical activity habits. Indeed, In France my house was on top of a small hill and every day I had to walk up and down to go to the university and attend lectures.</p>

<p><strong>That’s why, in the plot at the bottom of the previous figure, we can observe higher values before half of March and then they suddenly drop down.</strong></p>

<p>There is more. By looking closer at the data it is also possible to observe a curious trend. In the range of time from October 2019 to March 2020, i.e. the semester I have spent in France, if we look at the hourly evolution of the average number of floor climbed every day, we obtain the following:</p>

<!-- <div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <picture>
    
    <source media="(max-width: 480px)" srcset="/assets/resized/hourly_floors_climbed-480x128.png">
    
    <source media="(max-width: 800px)" srcset="/assets/resized/hourly_floors_climbed-800x213.png">
    
    <source media="(max-width: 1400px)" srcset="/assets/resized/hourly_floors_climbed-1400x373.png">
    
    <img class="img-fluid rounded z-depth-1" src="/assets/img/apple_health_app/output/hourly_floors_climbed.png"   data-zoomable />
</picture>

    </div>
</div>
<br> -->
<p><img src="/assets/img/apple_health_app/output/hourly_floors_climbed.png" width="100%" class="img-fluid rounded z-depth-1"></p>

<p>Monday, Thursday and Friday show a different pattern and it is because… <em>on those days I had lectures at university and I went up and down the hill several times per day!</em></p>

<!-- <div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <picture>
    
    <source media="(max-width: 480px)" srcset="/assets/resized/timetable-480x341.png">
    
    <source media="(max-width: 800px)" srcset="/assets/resized/timetable-800x568.png">
    
    <source media="(max-width: 1400px)" srcset="/assets/resized/timetable-1400x994.png">
    
    <img class="img-fluid rounded z-depth-1" src="/assets/img/apple_health_app/timetable.png"   data-zoomable />
</picture>

    </div>
</div>
<div class="caption">
    Timetable of my courses at Université Côte D'Azur
</div> -->

<p><img src="/assets/img/apple_health_app/timetable.png" width="100%" class="img-fluid rounded z-depth-1"></p>
<div class="caption">
    Timetable of my courses at Université Côte D'Azur
</div>

<p>Hence, only one question remains open: <em>why is the change in habits not showing up in the other meausures as well?</em> Because my house in Italy is located outside the city and I have a lot of space to workout, walk and so on. This allowed me to keep more or less the same physical activity habits, even though I was stuck at home.</p>

<h2 id="conclusion">Conclusion</h2>
<p>Data tell stories and this post is it proof. Looking at the data from the right perspective helps you understand the story they tell. This whole post originated from a single chart and a visual inspection. This is an other proof of how rich a dataset can be. Being a data scientist means to be able to discover and exploit such value.</p>

<h2 id="notes">Notes</h2>
<p>If you are interested in the code I have written for the analysis, by clicking on the button below you can download the html copy of my Jupyter Notebook.</p>

<p><a href="/assets/html/apple_health_app/apple_health_app_notebook.html" class="btn">HTML</a></p>

  </article>

  

</div>

    </div>

    <!-- Footer -->

    
<footer class="sticky-bottom mt-5">
  <div class="container">
    © Copyright 2022 Leo  D'Amato.
    
    
    
  </div>
</footer>



  </body>

  <!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>

  
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  





</html>
